<html>
<head>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="mastermind.js"></script>

	<script>
		var gameObject;

		$(document).ready(function() {

			gameObject = initialise();

			$('td').each(function() {
				$(this).data('state', 0);
			});


			$('td.peg').click(function() {
				var currentState = $(this).data('state');

				currentState = (currentState+1)%7;
				$(this).data('state', currentState );

				if (currentState == 0) {
					$(this).css('background-color', 'white');
				}
				else if (currentState == 1) {
					$(this).css('background-color', 'red');
				}
				else if (currentState == 2){
					$(this).css('background-color', 'blue');
				}
				else if (currentState == 3){
					$(this).css('background-color', 'green');
				}
				else if (currentState == 4){
					$(this).css('background-color', 'yellow');
				}
				else if (currentState == 5){
					$(this).css('background-color', 'black');
				}
				else if (currentState == 6){
					$(this).css('background-color', 'pink');
				}

			});
            $('td.check').click(function() {
               var tr = $(this).parent();
               var pegs = new Array();
               $(tr).children('td.peg').each(function(index, value) {
               		pegs.push($(value).data('state'));
               		
               });
               console.log(pegs);
               var r = gameObject.makeTurn(pegs);
               console.log(r);

               var red = r[0];
               var white = r[1];

               for(i=0; i<red; i++)
               		$(this).append("<div class='redpeg'></div>");

               for(i=0; i<white; i++)
               		$(this).append("<div class='whitepeg'></div>");

               	if(red == 4) {
               		$('body').empty();
               		$('body').append("<div class='victory'>VICTORY</div>")
               	}
            });

		});

	</script>

	<style>
		table {
			margin: 0 auto;
		}
		table td {
			border: 1px solid black;
			height: 100px;
			width: 100px;
		}
		table td.peg {
			border-radius: 100px;
		}
		div.redpeg {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			border: 1px solid black;
			background-color: red;
		}
		div.whitepeg {
			width: 10px;
			height: 10px;
			border-radius: 10px;
			border: 1px solid black;
			background-color: white;
		}
		div.victory {
			font-size: 16em;
			text-align: center;
			font-family: cursive;
		}

		h1 {
			text-align: center;
		}
	</style>

</head>

<body>
	<h1>Mastermind</h1>

	<table>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
		<tr><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class='peg'></td><td class= 'check'></td></tr>
	</table>

</body>

</html>